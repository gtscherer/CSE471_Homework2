num(1..9).
border(1;4;7).
1 { a(R,C,N) : num(N) } 1 :- num(R;C).
1 { a(R,C,N) : num(R) } 1 :- num(C;N).
1 { a(R,C,N) : num(C) } 1 :- num(R;N).
:- a(R,C,N), a(R1,C1,N), R!=R1, C!=C1, (((R-1)/3)*3 + (C-1)/3) == (((R1-1)/3)*3 + (C1-1)/3).
:- a(R,C,N), a(R1,C1,N), R!=R1, C!=C1, R>1, R1>1, R<5, R1<5, C>1, C1>1, C<5, C1<5.
:- a(R,C,N), a(R1,C1,N), R!=R1, C!=C1, R>5, R1>5, R<9, R1<9, C>1, C1>1, C<5, C1<5.
:- a(R,C,N), a(R1,C1,N), R!=R1, C!=C1, R>1, R1>1, R<5, R1<5, C>5, C1>5, C<9, C1<9.
:- a(R,C,N), a(R1,C1,N), R!=R1, C!=C1, R>5, R1>5, R<9, R1<9, C>5, C1>5, C<9, C1<9. 
a(1,2,4).
a(2,1,7).
a(2,2,8).
a(2,5,1).
a(1,8,7).
a(2,8,6).
a(2,9,9).
a(5,2,5).
a(4,4,4).
a(6,4,7).
a(5,5,3).
a(4,6,1).
a(6,6,6).
a(5,8,4).
a(8,1,1).
a(8,2,6).
a(9,2,7).
a(8,5,9).
a(8,8,3).
a(9,8,2).
a(8,9,8).

